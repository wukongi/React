{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","components/Message.js","App.js","index.js"],"names":["Blog","blog","className","title","author","token","getAll","a","axios","get","response","data","setToken","newToken","create","config","headers","Authorization","post","login","credentials","console","log","Message","errorMessage","successMessage","App","useState","blogs","setBlogs","user","setUser","username","setUsername","password","setPassword","setTitle","setAuthor","url","setUrl","setErrorMessage","setSuccessMessage","useEffect","blogService","then","loggerUserJson","window","localStorage","getItem","JSON","parse","handleLogin","event","preventDefault","loginService","setItem","stringify","setTimeout","handleCreate","newBlog","concat","onSubmit","type","name","value","onChange","target","onClick","removeItem","map","key","id","ReactDOM","render","document","getElementById"],"mappings":"gQAOeA,EANF,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OACX,yBAAKC,UAAU,WACZD,EAAKE,MADR,IACgBF,EAAKG,S,gBCAnBC,EAAQ,KAeG,GAAEC,OAXL,uCAAG,4BAAAC,EAAA,sEACUC,IAAMC,IAPf,cAMD,cACPC,EADO,yBAENA,EAASC,MAFH,2CAAH,qDAWaC,SAdR,SAACC,GAChBR,EAAK,iBAAaQ,IAaeC,OANvB,uCAAG,WAAOb,GAAP,iBAAAM,EAAA,6DACPQ,EAAS,CAAEC,QAAS,CAAEC,cAAeZ,IAD9B,SAEUG,IAAMU,KAbf,aAa6BjB,EAAMc,GAFpC,cAEPL,EAFO,yBAGNA,EAASC,MAHH,2CAAH,uDCJG,GAAEQ,MALN,uCAAG,WAAOC,GAAP,eAAAb,EAAA,6DACZc,QAAQC,IAAIF,GADA,SAEWZ,IAAMU,KAJf,aAI6BE,GAF/B,cAENV,EAFM,yBAGLA,EAASC,MAHJ,2CAAH,uDCQIY,EATC,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,aAAcC,EAAqB,EAArBA,eAC/B,OAAqB,OAAjBD,GAA4C,OAAnBC,EACpB,KACmB,OAAjBD,GAA4C,OAAnBC,EAC3B,yBAAKvB,UAAU,SAASsB,GACL,OAAjBA,GAA4C,OAAnBC,EAC3B,yBAAKvB,UAAU,WAAWuB,QAD5B,GC8JMC,EAhKH,WAAO,IAAD,EACUC,mBAAS,IADnB,mBACTC,EADS,KACFC,EADE,OAEQF,mBAAS,MAFjB,mBAETG,EAFS,KAEHC,EAFG,OAGgBJ,mBAAS,IAHzB,mBAGTK,EAHS,KAGCC,EAHD,OAIgBN,mBAAS,IAJzB,mBAITO,EAJS,KAICC,EAJD,OAKUR,mBAAS,IALnB,mBAKTxB,EALS,KAKFiC,EALE,OAMYT,mBAAS,IANrB,mBAMTvB,EANS,KAMDiC,EANC,OAOMV,mBAAS,IAPf,mBAOTW,EAPS,KAOJC,EAPI,OAQwBZ,mBAAS,MARjC,mBAQTH,EARS,KAQKgB,EARL,OAS4Bb,mBAAS,MATrC,mBASTF,EATS,KASOgB,EATP,KAUhBC,qBAAU,WACRC,EAAYrC,SAASsC,MAAK,SAAChB,GAAD,OAAWC,EAASD,QAC7C,IACHc,qBAAU,WACR,IAAMG,EAAiBC,OAAOC,aAAaC,QAAQ,kBACnD,GAAIH,EAAgB,CAClB,IAAMf,EAAOmB,KAAKC,MAAML,GACxBd,EAAQD,GACRa,EAAY/B,SAASkB,EAAKzB,UAE3B,IACH,IAAM8C,EAAW,uCAAG,WAAOC,GAAP,eAAA7C,EAAA,6DAClB6C,EAAMC,iBADY,kBAGGC,EAAanC,MAAM,CACpCa,WACAE,aALc,OAGVJ,EAHU,OAOhBgB,OAAOC,aAAaQ,QAAQ,iBAAkBN,KAAKO,UAAU1B,IAE7Da,EAAY/B,SAASkB,EAAKzB,OAC1B0B,EAAQD,GACRW,EAAkB,GAAD,OAAIT,EAAJ,YACjBC,EAAY,IACZE,EAAY,IACZsB,YAAW,WACThB,EAAkB,QACjB,KAhBa,kDAkBhBD,EAAgB,qBAChBiB,YAAW,WACTjB,EAAgB,QACf,KArBa,0DAAH,sDAwBXkB,EAAY,uCAAG,WAAON,GAAP,iBAAA7C,EAAA,6DACnB6C,EAAMC,iBADa,SAGXpD,EAAO,CACXE,QACAC,SACAkC,OANe,SAQKK,EAAY7B,OAAOb,GARxB,OAQX0D,EARW,OASjB9B,EAASD,EAAMgC,OAAOD,IACtBlB,EAAkB,cAAD,OAAetC,EAAf,eAA2B2B,EAA3B,WACjBM,EAAS,IACTG,EAAO,IACPF,EAAU,IACVoB,YAAW,WACThB,EAAkB,QACjB,KAhBc,kDAkBjBD,EAAgB,2BAlBC,0DAAH,sDAgGlB,OACE,oCACE,kBAAC,EAAD,CAAShB,aAAcA,EAAcC,eAAgBA,IAC3C,OAATK,EA5EH,6BACE,qDACA,0BAAM+B,SAAUV,GACd,wCAEE,2BACEW,KAAK,OACLC,KAAK,WACLC,MAAOhC,EACPiC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBjC,EAAYiC,EAAOF,WAGjD,wCAEE,2BACEF,KAAK,WACLC,KAAK,WACLC,MAAO9B,EACP+B,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB/B,EAAY+B,EAAOF,WAGjD,4BAAQF,KAAK,UAAb,WA0DA,6BACE,qCACA,2BACGhC,EAAKE,SADR,aAC4B,IAC1B,4BAAQmC,QArBG,WACnBrB,OAAOC,aAAaqB,WAAW,kBACuB,OAAlDtB,OAAOC,aAAaC,QAAQ,kBAC9BjB,EAAQ,OAERS,EAAgB,qBAChBiB,YAAW,WACTjB,EAAgB,QACf,QAaG,WAzDR,6BACE,6BACA,6BACA,0CACA,0BAAMqB,SAAUH,GACd,sCAEE,2BACEI,KAAK,OACLE,MAAO7D,EACP8D,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB9B,EAAS8B,EAAOF,WAG9C,uCAEE,2BACEF,KAAK,OACLE,MAAO5D,EACP6D,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB7B,EAAU6B,EAAOF,WAG/C,oCAEE,2BACEF,KAAK,OACLE,MAAO1B,EACP2B,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB3B,EAAO2B,EAAOF,WAG5C,4BAAQF,KAAK,UAAb,WAEDlC,EAAMyC,KAAI,SAACpE,GAAD,OACT,kBAAC,EAAD,CAAMqE,IAAKrE,EAAKsE,GAAItE,KAAMA,W,MC/HlCuE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.727afe90.chunk.js","sourcesContent":["import React from \"react\";\r\nconst Blog = ({ blog }) => (\r\n  <div className=\"content\">\r\n    {blog.title} {blog.author}\r\n  </div>\r\n);\r\n\r\nexport default Blog;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/blogs\";\r\n\r\nlet token = null;\r\nconst setToken = (newToken) => {\r\n  token = `bearer ${newToken}`;\r\n};\r\nconst getAll = async () => {\r\n  const response = await axios.get(baseUrl);\r\n  return response.data;\r\n};\r\n\r\nconst create = async (blog) => {\r\n  const config = { headers: { Authorization: token } };\r\n  const response = await axios.post(baseUrl, blog, config);\r\n  return response.data;\r\n};\r\n\r\nexport default { getAll, setToken, create };\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/login\";\r\n\r\nconst login = async (credentials) => {\r\n  console.log(credentials);\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\nexport default { login };\r\n","import React from \"react\";\r\n\r\nconst Message = ({ errorMessage, successMessage }) => {\r\n  if (errorMessage === null && successMessage === null) {\r\n    return null;\r\n  } else if (errorMessage !== null && successMessage === null) {\r\n    return <div className=\"error\">{errorMessage}</div>;\r\n  } else if (errorMessage === null && successMessage !== null) {\r\n    return <div className=\"success\">{successMessage}</div>;\r\n  }\r\n};\r\nexport default Message;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Blog from \"./components/Blog\";\r\nimport blogService from \"./services/blogs\";\r\nimport loginService from \"./services/login\";\r\nimport Message from \"./components/Message\";\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [author, setAuthor] = useState(\"\");\r\n  const [url, setUrl] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  useEffect(() => {\r\n    blogService.getAll().then((blogs) => setBlogs(blogs));\r\n  }, []);\r\n  useEffect(() => {\r\n    const loggerUserJson = window.localStorage.getItem(\"loggedBlogUser\");\r\n    if (loggerUserJson) {\r\n      const user = JSON.parse(loggerUserJson);\r\n      setUser(user);\r\n      blogService.setToken(user.token);\r\n    }\r\n  }, []);\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const user = await loginService.login({\r\n        username,\r\n        password,\r\n      });\r\n      window.localStorage.setItem(\"loggedBlogUser\", JSON.stringify(user));\r\n\r\n      blogService.setToken(user.token);\r\n      setUser(user);\r\n      setSuccessMessage(`${username} logged`);\r\n      setUsername(\"\");\r\n      setPassword(\"\");\r\n      setTimeout(() => {\r\n        setSuccessMessage(null);\r\n      }, 5000);\r\n    } catch (exception) {\r\n      setErrorMessage(\"wrong credentials\");\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n  const handleCreate = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const blog = {\r\n        title,\r\n        author,\r\n        url,\r\n      };\r\n      const newBlog = await blogService.create(blog);\r\n      setBlogs(blogs.concat(newBlog));\r\n      setSuccessMessage(`a new blog ${title} by ${user} added`);\r\n      setTitle(\"\");\r\n      setUrl(\"\");\r\n      setAuthor(\"\");\r\n      setTimeout(() => {\r\n        setSuccessMessage(null);\r\n      }, 5000);\r\n    } catch (exception) {\r\n      setErrorMessage(\"the new creation failed\");\r\n    }\r\n  };\r\n\r\n  const loginForm = () => (\r\n    <div>\r\n      <h1>log in to application</h1>\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          username\r\n          <input\r\n            type=\"text\"\r\n            name=\"Username\"\r\n            value={username}\r\n            onChange={({ target }) => setUsername(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input\r\n            type=\"password\"\r\n            name=\"Password\"\r\n            value={password}\r\n            onChange={({ target }) => setPassword(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n  const blogForm = () => (\r\n    <div>\r\n      <br />\r\n      <br />\r\n      <h2>create new</h2>\r\n      <form onSubmit={handleCreate}>\r\n        <div>\r\n          title:\r\n          <input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={({ target }) => setTitle(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          author:\r\n          <input\r\n            type=\"text\"\r\n            value={author}\r\n            onChange={({ target }) => setAuthor(target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          url:\r\n          <input\r\n            type=\"text\"\r\n            value={url}\r\n            onChange={({ target }) => setUrl(target.value)}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">create</button>\r\n      </form>\r\n      {blogs.map((blog) => (\r\n        <Blog key={blog.id} blog={blog} />\r\n      ))}\r\n    </div>\r\n  );\r\n  const handleLogout = () => {\r\n    window.localStorage.removeItem(\"loggedBlogUser\");\r\n    if (window.localStorage.getItem(\"loggedBlogUser\") === null) {\r\n      setUser(null);\r\n    } else {\r\n      setErrorMessage(\"something happens\");\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Message errorMessage={errorMessage} successMessage={successMessage} />\r\n      {user === null ? (\r\n        loginForm()\r\n      ) : (\r\n        <div>\r\n          <h2>Blogs</h2>\r\n          <p>\r\n            {user.username} logged in{\" \"}\r\n            <button onClick={handleLogout}>logout</button>\r\n          </p>\r\n          {blogForm()}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}